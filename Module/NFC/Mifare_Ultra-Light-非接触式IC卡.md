### MIFARE UltraLight卡 - M0

### 1. 概述：

```C
/*
1. 容量512bit，分为16page，每个，每页现场可编程只读锁定功能
2. 工作频率 13.56 MHz
3. 32 位用户可定义的一次性可编程 （OTP） 区域（页3）
4. 384 位用户读/写区域（12 页（4-15））
5. 唯一7字节物理卡号（page0前3个byte加page1）
*/
```
### 2. 存储结构：

![image-20241115104131901](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241115104131901.png)

```c
/* M0卡存储结构的详细介绍 */
/*
​ Page0和Page1以及Page2的第1个字节是卡片的7字节序列号及其校验字节，其中BCC0=0x88+SN0+SN1+SN2，BCC1=SN3+SN4+SN5+SN6，SN0是制造商代码，由于Mifare UltraLight是NXP公司出品，因而SN0固定为04H。
​ Page2的第2个字节Internal作为内部数据保留。以上共10个字节出厂时固化在存储区内，用户无法更改。
​ Page3是一次性烧录(One Time Programmable,OTP)页,该页的内容在卡片出厂时全部被写为“0”，用户使用时只能把某一位的内容写为“1”，而永远也不能把“1”写为0，也就是说，新写入的4字节内容与卡内原来的内容进行异或，异或后的结果存储在卡片中。
​ Page4-Page15是可读写的用户数据区，出厂时其内容初始化为0，用户可以任意读写。
​ Page2的第3和第4个字节用于将存储区锁定为只读。

*/
```

### 3. 操作流程：

```c
/* 寻卡、防冲撞、选卡、防冲撞、选卡、读写 */
/*
注意的是：
1. 初始化天线关闭启动动作位置以及延时
2. 对于Ultralight卡，一次必须写入4个字节，也就是一个Page，但你仍需将你写入的数据以后补0的方式补足16字节，尽管它实际写入的只是前4个字节。

*/
```

